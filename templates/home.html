<!DOCTYPE html>
<html>
<head>
    {% load static %}
    <meta charset="UTF-8">
    <title>Gains Galore 🏋🏾‍♂️</title>
    <link rel="stylesheet" href="{% static 'css/style.css' %}">
</head>
<body>
    <header>
        <h1>Welcome to Gains Galore 💪🏾</h1>
    </header>

    <div class="container">
        <div class="auth-links">
            {% if user.is_authenticated %}
                <p>Welcome back, {{ user.username }}! <a href="/admin/logout/">Logout</a></p>
            {% else %}
                <a href="/users/login/">Login</a> |
                <a href="/users/register/">Register</a>
            {% endif %}
        </div>

        <h2>Workout Plans</h2>
        <ul class="workout-list">
            {% for workout in workouts %}
                <li>
                    <span class="workout-title" onclick="toggleDetails('details-{{ forloop.counter }}')">
                        {{ workout.title }} - {{ workout.difficulty|capfirst }}
                    </span>
                    <div class="workout-details" id="details-{{ forloop.counter }}">
                        <p>{{ workout.description }}</p>
                        {% if workout.video_url %}
                            <a href="{{ workout.video_url }}" target="_blank">Watch Video</a><br>
                        {% endif %}
                        {% if workout.is_premium %}
                            <em>Premium</em>
                        {% else %}
                            <em>Free</em>
                        {% endif %}
                    </div>
                </li>
            {% empty %}
                <p>No workouts available.</p>
            {% endfor %}
        </ul>
    </div>

    <script>
        function toggleDetails(id) {
            const el = document.getElementById(id);
            el.style.display = el.style.display === 'none' || el.style.display === '' ? 'block' : 'none';
        }
    </script>
</body>
</html>
